{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"SCANTEC - Sistema Comunit\u00e1rio de Avalia\u00e7\u00e3o de Modelos Num\u00e9ricos de Tempo E Clima","text":""},{"location":"#scantec-sistema-comunitario-de-avaliacao-de-modelos-numericos-de-tempo-e-clima","title":"SCANTEC - Sistema Comunit\u00e1rio de Avalia\u00e7\u00e3o de Modelos Num\u00e9ricos de Tempo E Clima","text":"<p>O SCANTEC<sup>1</sup> \u00e9 um sistema de avalia\u00e7\u00e3o de modelos num\u00e9ricos de tempo e clima, concebido para uniformizar o uso e a aplica\u00e7\u00e3o das metodologias de avalia\u00e7\u00e3o, al\u00e9m de permitir a intercompara\u00e7\u00e3o entre diferentes modelos num\u00e9ricos. O SCANTEC \u00e9 escrito em linguagem Fortran 90 e pode ser aplicado em diferentes ambientes computacionais.</p> <p></p> <p>Nesta p\u00e1gina, s\u00e3o apresentadas as informa\u00e7\u00f5es sobre a \u00faltima vers\u00e3o do SCANTEC, bem como o seu manual de utiliza\u00e7\u00e3o.</p> <p></p> <ol> <li> <p>de MATTOS, J. G. Z.; SAPUCCI, L. F.; BASTARZ, C. F.. SCANTEC V2.0.0 - Sistema Comunit\u00e1rio de Avalia\u00e7\u00e3o de modelos Num\u00e9ricos de Tempo e Clima. 2022. Patente: Programa de Computador. N\u00famero do registro: BR512022002066-1, data de registro: 09/08/2022, Institui\u00e7\u00e3o de registro: INPI - Instituto Nacional da Propriedade Industrial.\u00a0\u21a9</p> </li> </ol>"},{"location":"instalacao/","title":"Instala\u00e7\u00e3o","text":""},{"location":"instalacao/#instalacao","title":"Instala\u00e7\u00e3o","text":"<p>Para a instala\u00e7\u00e3o do SCANTEC, o sistema possui um script que prepara o ambiente para a instala\u00e7\u00e3o, o qual envolve a compila\u00e7\u00e3o de bibliotecas e m\u00f3dulos que integram o sistema. Ao final do processo, \u00e9 gerado o execut\u00e1vel <code>scantec.x</code>, que \u00e9 ent\u00e3o alocado no diret\u00f3rio <code>bin</code>. O SCANTEC est\u00e1 preparado para funcionar em diversos ambientes computacionais, como as m\u00e1quinas virtuais do CPTEC (e.g., Itapemirim), e supercomputadores XC50. O SCANTEC tamb\u00e9m pode ser utilizado em m\u00e1quinas locais na mesa do usu\u00e1rio, sejam elas workstations ou mesmo notebooks.</p> <p>Nota</p> <p>Idealmente, o SCANTEC deve funcionar tamb\u00e9m na m\u00e1quina EGEON do CPTEC, por\u00e9m, a presente vers\u00e3o SCANTEC V.2.1.0 requer recursos mais atuais do compilador Fortran, os quais n\u00e3o est\u00e3o dispon\u00edveis na m\u00e1quina. Apesar disso, ainda h\u00e1 a possibilidade de se utilizar o SCANTEC a partir de um container. Instru\u00e7\u00f5es espec\u00edficas para a utiliza\u00e7\u00e3o do SCANTEC em outras m\u00e1quinas s\u00e3o fornecidas ao longo desta se\u00e7\u00e3o.</p>"},{"location":"instalacao/#instalacao-em-maquinas-virtuais-e-locais","title":"Instala\u00e7\u00e3o em m\u00e1quinas virtuais e locais","text":"<p>A m\u00e1quina Itapemirim (baseada no Ubuntu 18.04, kernel 4.4.0-200-generic) foi utilizada para validar o SCANTEC V2.2.0. Em uma outra m\u00e1quina em que se deseja ter o SCANTEC para uso, \u00e9 necess\u00e1rio ter instalado os seguintes requerimentos:</p> <ul> <li>Compilador Intel Fortran (<code>ifort</code>) ou o GNU Fortran (<code>gfortran</code>, vers\u00e3o 9 ou superior);</li> <li>Pacote Subversion e Git (<code>svn</code> e <code>git</code>);</li> <li>Biblioteca LAPACK - Linear Algebra PACKage.</li> </ul> <p>Informa\u00e7\u00e3o</p> <p>Essa vers\u00e3o cont\u00e9m algumas atualiza\u00e7\u00f5es como um script para convers\u00e3o de dados NETCDF para .grb al\u00e9m de atualiza\u00e7\u00e3o dos dados de teste.</p> <p>Para a instala\u00e7\u00e3o do SCANTEC, realize os procedimentos a seguir. N\u00e3o se esque\u00e7a de substituir as palavras <code>&lt;grupo&gt;</code> e <code>&lt;usuario&gt;</code> pelos nomes do seu grupo e usu\u00e1rio, respectivamente.</p> <ol> <li> <p>Fa\u00e7a login na m\u00e1quina Itapemirim:</p> Comando <pre><code>ssh &lt;usuario&gt;@itapemirim.cptec.inpe.br -XC\n</code></pre> </li> <li> <p>Entre no diret\u00f3rio <code>/scripts/&lt;grupo&gt;/usuario</code> (recomendado) ou em um diret\u00f3rio da prefer\u00eancia do usu\u00e1rio para realizar a instala\u00e7\u00e3o do SCANTEC. Fa\u00e7a o download utilizando o github https://github.com/GAD-DIMNT-CPTEC/SCANTEC:</p> Comando <pre><code>cd /scripts/&lt;grupo&gt;/&lt;usuario&gt;\ngit clone https://github.com/GAD-DIMNT-CPTEC/SCANTEC.git\n</code></pre> </li> <li> <p>Entre no diret\u00f3rio criado <code>SCANTEC</code>:</p> Comando <pre><code>cd SCANTEC\n</code></pre> </li> <li> <p>Carregue o ambiente <code>SCANTEC</code> para a compila\u00e7\u00e3o do SCANTEC:</p> <p>Para usu\u00e1rios do grupo DAS, a m\u00e1quina Itapemirim, carregue o ambiente (dispon\u00edvel em <code>/scripts/das/conda/envs/SCANTEC</code>) com o comando:    </p> Comando <pre><code>source /scripts/das/conda/envs/SCANTEC/bin/activate\n</code></pre> <p>Nota</p> <p>Para usu\u00e1rios fora do grupo DAS, \u00e9 preciso copiar um pacote do ambiente conda do SCANTEC, desempacot\u00e1-lo para ativar esse ambiente e ajustar os endere\u00e7os com o comando <code>conda-pack</code>. Para isso fa\u00e7a os commandos abaixo:</p> <ul> <li> <p>Copie o pacote SCANTEC.tar para sua instala\u00e7\u00e3o local do conda:</p> Comando <pre><code>cp /scripts/das/conda/envs/SCANTEC.tar ~/conda/envs\n</code></pre> </li> <li> <p>Desempacotar o ambiente:</p> Comando <pre><code>cd ~/conda/envs ; tar -xvf SCANTEC.tar\n</code></pre> </li> <li> <p>Ativar o ambiente:</p> Comando <pre><code>source ~/conda/envs/SCANTEC/bin/activate\n</code></pre> </li> <li> <p>Executar o conda-unpack para corrigir/atualizar os paths:</p> Comando <pre><code>conda-unpack\n</code></pre> </li> </ul> <p>Em outras m\u00e1quinas esta etapa n\u00e3o \u00e9 necess\u00e1ria, mas certifique-se de que h\u00e1 pelo menos o compilador GNU Fortran vers\u00e3o 9 ou superior instalado.</p> </li> <li> <p>Execute o script <code>install</code>:</p> ComandoResultado <pre><code>./install\n</code></pre> <pre><code>------------------choose one of options-----------------\n\n 1 - Clean Environment\n\n 2 - GNU - Load GNU Gfortran Environment to LINUX and compile\n\n 3 - CCE XE - Load Cray Environment to XT/XE and compile\n\n 4 - INTEL - Load INTEL Environment to LINUX and compile\n\n E - Exit\n\nChoose one of options (1-E): \n</code></pre> </li> </ol> <p>Notas</p> <ul> <li>Escolha a op\u00e7\u00e3o <code>2</code> para utilizar o compilador <code>gfortran</code>, que dever\u00e1 ser a vers\u00e3o 9 ou superior;</li> <li>Acompanhe a compila\u00e7\u00e3o com as informa\u00e7\u00f5es no terminal;</li> <li>Verifique o sucesso do processo identificando o arquivo execut\u00e1vel <code>SCANTEC-2.1.0/bin/scantec.x</code>;</li> <li>Caso algum problema seja detectado ou seja necess\u00e1rio compilar novamente, utilize a op\u00e7\u00e3o <code>1</code> para limpar a compila\u00e7\u00e3o anterior e reinicie o processo.</li> </ul>"},{"location":"instalacao/#instalacao-do-scantec-em-maquina-laptops-no-windows-via-wsl","title":"Instala\u00e7\u00e3o do SCANTEC em maquina laptops no windows via WSL","text":"<p>A instala\u00e7\u00e3o do SCANTEC em m\u00e1quinas com o sistema operacional Windows pode ser feita atrav\u00e9s do WSL. Um guia de instala\u00e7\u00e3o mais detalhado pode ser encontrado atrav\u00e9s do link: https://learn.microsoft.com/pt-br/windows/wsl/install.</p>"},{"location":"instalacao/#wsl","title":"WSL","text":"<p>O WSL (Windows Subsystem for Linux) \u00e9 uma funcionalidade do Windows que permite executar um ambiente Linux diretamente no Windows, sem a necessidade de uma m\u00e1quina virtual. Ele possibilita a execu\u00e7\u00e3o de comandos e ferramentas do Linux nativamente, proporcionando integra\u00e7\u00e3o entre os sistemas operacionais e facilitando o desenvolvimento de software que precisa utilizar recursos do Linux enquanto ainda opera no ambiente Windows.</p>"},{"location":"instalacao/#requisitos-para-instalacao","title":"Requisitos para instala\u00e7\u00e3o","text":"<p>Para instalar o WSL voc\u00ea deve estar executando o Windows 10 ou vers\u00f5es superiores.</p>"},{"location":"instalacao/#comandos-para-a-instalacao","title":"Comandos para a instala\u00e7\u00e3o","text":"<p>No Prompt de Comando do Windows digite a seguinte linha de c\u00f3digo:</p> Comando <p></p><pre><code>wsl --install\n</code></pre> <p>A vers\u00e3o defaut que ser\u00e1 instalada ser\u00e1 UBUNTU. Reinicie a m\u00e1quina para que as novas atualiza\u00e7\u00f5es sejam feitas. Com a m\u00e1quina reiniciada, busque pela aplica\u00e7\u00e3o linux instalada e fa\u00e7a o devido processo de \"cadastro\" de login e senha.</p> <p></p> <p>Pronto! Um terminal linux est\u00e1 instalado em sua m\u00e1quina.</p>"},{"location":"instalacao/#instalacao-do-scantec","title":"Instala\u00e7\u00e3o do SCANTEC","text":"<p>Entre na p\u00e1gina https://github.com/GAD-DIMNT-CPTEC/SCANTEC e procure pela barra azul \"Code/C\u00f3digo\". V\u00e1 na aba HTTPS, copie o endere\u00e7o https://github.com/GAD-DIMNT-CPTEC/SCANTEC.git e digite o c\u00f3digo no terminal linux</p> Comando <pre><code>git clone https://github.com/GAD-DIMNT-CPTEC/SCANTEC.git\n</code></pre> <p></p> <p>Instale as bibliotecas necess\u00e1rias. (voc\u00ea ir\u00e1 precisar da senha que voc\u00ea cadastrou). No terminal linux digite as seguintes linhas de c\u00f3digo:</p> Comando <p></p><pre><code>sudo apt update\nsudo apt install make gfortran\n</code></pre> <p>Verifique a instala\u00e7\u00e3o do Gfortran com o comando:</p> Comando <p></p><pre><code>gfortran --version\n</code></pre>"},{"location":"instalacao/#compilacao-do-scantec","title":"Compila\u00e7\u00e3o do SCANTEC","text":"<p>Com as bibliotecas e compilador instalados, entre no diret\u00f3rio onde o SCANTEC foi instalado.</p> <p>Digite o comando no terminal linux</p> Comando <pre><code>./install\n</code></pre> <p>Escolha a op\u00e7\u00e3o 1 para limpar o ambiente. Fa\u00e7a esse procedimento novamente por\u00e9m agora digite 2 (op\u00e7\u00e3o para compila\u00e7\u00e3o do Gfortran).</p>"},{"location":"introducao/","title":"Introdu\u00e7\u00e3o","text":""},{"location":"introducao/#scantec","title":"SCANTEC","text":"<p>A constante evolu\u00e7\u00e3o dos computadores acarretou num progressivo aperfei\u00e7oamento dos modelos de Previs\u00e3o Num\u00e9rica de Tempo e Clima (PNTC). Com isso, um enorme volume de informa\u00e7\u00f5es sobre o estado atual e futuro da atmosfera \u00e9 constantemente produzido nos diversos centros operacionais de previs\u00e3o de tempo e clima no Brasil e no mundo. Cada modelo possui caracter\u00edsticas distintas, podendo ser regionais ou globais, com resolu\u00e7\u00f5es horizontais e verticais diferentes a fim de representar os mais diversos fen\u00f4menos meteorol\u00f3gicos. Para que tenha uma validade cient\u00edfica e possa ser bem aproveitada, todas essas informa\u00e7\u00f5es necessitam de uma pr\u00e9via avalia\u00e7\u00e3o estat\u00edstica, com o intuito de se conhecer o grau de acerto dos modelos utilizados. Al\u00e9m disso, a evolu\u00e7\u00e3o da modelagem depende da adequada identifica\u00e7\u00e3o das limita\u00e7\u00f5es nela presentes, bem como dos fatores e metodologias que geram melhores resultados. V\u00e1rios m\u00e9todos de avalia\u00e7\u00e3o de modelos s\u00e3o utilizados atualmente, entre eles os mais conhecidos s\u00e3o a Raiz do Erro Quadr\u00e1tico M\u00e9dio, o Vi\u00e9s e o Coeficiente de Correla\u00e7\u00e3o de Anomalia. No entanto, devido ao grande volume de informa\u00e7\u00f5es necess\u00e1rias para realizar uma avalia\u00e7\u00e3o robusta sobre a habilidade dos modelos em produzir informa\u00e7\u00f5es real\u00edsticas, torna-se necess\u00e1rio o desenvolvimento de uma ferramenta capaz de agregar diversas m\u00e9tricas para os mais variados tipos de avalia\u00e7\u00e3o aplicados aos modelos de previs\u00e3o num\u00e9rica. Na Divis\u00e3o de Modelagem Num\u00e9rica do Sistema Terrestre (DIMNT) do Centro de Previs\u00e3o de Tempo e Estudos Clim\u00e1ticos (CPTEC) do Instituto Nacional de Pesquisas Espaciais (INPE), encontra-se em desenvolvimento um sistema estat\u00edstico de avalia\u00e7\u00e3o de modelos de PNTC.</p>"},{"location":"introducao/#objetivos","title":"Objetivos","text":"<p>O objetivo principal do SCANTEC \u00e9 investigar as m\u00e9tricas mais robustas para a adequada avalia\u00e7\u00e3o dos modelos de PNTC, as quais atendam a todos os requisitos esperados nesta tarefa - tanto pelos desenvolvedores de modelos num\u00e9ricos de PNTC, como dos usu\u00e1rios desses modelos. Os objetivos espec\u00edficos contemplam os seguintes t\u00f3picos:</p> <ul> <li>Investiga\u00e7\u00e3o de m\u00e9tricas adequadas para a avalia\u00e7\u00e3o das vari\u00e1veis atmosf\u00e9ricas dos modelos de PNTC na compara\u00e7\u00e3o com condi\u00e7\u00f5es iniciais, bem como dados observados e climatologias;</li> <li>Investiga\u00e7\u00e3o de m\u00e9tricas adequadas para a avalia\u00e7\u00e3o das previs\u00f5es de precipita\u00e7\u00e3o geradas pelos modelos de PNTC, a partir de an\u00e1lises estat\u00edsticas e determina\u00e7\u00e3o de \u00edndices baseados em observa\u00e7\u00f5es (em superf\u00edcie e por sat\u00e9lites), al\u00e9m de campos climatol\u00f3gicos;</li> <li>Investiga\u00e7\u00e3o de metodologias adequadas para a utiliza\u00e7\u00e3o de observa\u00e7\u00f5es na avalia\u00e7\u00e3o dos modelos de PNTC, considerando interpola\u00e7\u00f5es das grades regulares dos modelos com as observa\u00e7\u00f5es irregularmente distribu\u00eddas no espa\u00e7o;</li> <li>Investiga\u00e7\u00e3o de m\u00e9tricas e metodologias mais adequadas para a avalia\u00e7\u00e3o da qualidade das condi\u00e7\u00f5es iniciais geradas em processos de assimila\u00e7\u00e3o de dados.</li> </ul>"},{"location":"namelist/","title":"Namelist","text":""},{"location":"namelist/#namelist","title":"Namelist","text":"<p>O arquivo namelist <code>scantec.conf</code> do SCANTEC \u00e9 constitu\u00eddo de 5 grupos de informa\u00e7\u00f5es:</p> <ol> <li>Per\u00edodo em avalia\u00e7\u00e3o;</li> <li>Recorte comum dos dom\u00ednios dos modelos em avalia\u00e7\u00e3o;</li> <li>Endere\u00e7os de tabelas e dos arquivos de sa\u00edda dos resultados;</li> <li>Endere\u00e7os dos arquivos dos modelos em avalia\u00e7\u00e3o e plugins usados;</li> <li>Informa\u00e7\u00f5es sobre a climatologia usada no c\u00e1lculo do Coeficiente de Correla\u00e7\u00e3o de Anomalia (CCA);</li> </ol> <p>Para cada um desses grupos s\u00e3o apresentadas as palavras-chave de cada informa\u00e7\u00e3o junto com um exemplo e um coment\u00e1rio sobre essa informa\u00e7\u00e3o (linha de cima):</p> Data inicial do per\u00edodo (primeira an\u00e1lise usada)<pre><code>Starting Time: 2020040400\n</code></pre> Data final do per\u00edodo (\u00faltima an\u00e1lise usada)<pre><code>Ending Time: 2020040812\n</code></pre> Passo de tempo em horas entre as an\u00e1lises no per\u00edodo<pre><code>Analisys Time Step: 12\n</code></pre> <p>Aten\u00e7\u00e3o</p> <p>Independente da forma como o SCANTEC \u00e9 utilizado, \u00e9 fundamental que a vari\u00e1vel <code>Analisys Time Step</code> seja adequadamente ajustada para que os arquivos <code>.ctl</code> (utilizados para a visualiza\u00e7\u00e3o da distribui\u00e7\u00e3o espacial das estat\u00edsticas) sejam corretamente definidos. Se o SCANTEC for utilizado para a avalia\u00e7\u00e3o de modelos para apenas uma data (e.g., quando as vari\u00e1veis <code>Starting Time</code> e <code>Ending Time</code> possu\u00edrem os mesmos valores), ajuste a vari\u00e1vel <code>Analisys Time Step</code> com um valor que reflita o intervalo de tempo entre as previs\u00f5es. Este valor \u00e9 utilizado para o c\u00e1lculo da vari\u00e1vel <code>tdef</code> a ser alocada dentro do arquivo <code>.ctl</code>. Veja a issue #3 no GitHub do SCANTEC para mais informa\u00e7\u00f5es.</p> Passo de tempo em horas entre as previs\u00f5es avaliadas (tem que ser o mesmo passo entre as an\u00e1lises usadas como refer\u00eancia)<pre><code>Forecast Time Step: 6\n</code></pre> Tempo de integra\u00e7\u00e3o do modelo em avalia\u00e7\u00e3o<pre><code>Forecast Total Time: 72\n</code></pre> N\u00famero de recortes, para o caso de se usar uma avalia\u00e7\u00e3o com diversos dom\u00ednios<pre><code>run domain number: 1\n</code></pre> Latitude inferior do recorte<pre><code>run domain lower left lat: -51.000000\n</code></pre> Longitude inferior do recorte<pre><code>run domain lower left lon: -84.099998\n</code></pre> Latitude superior do recorte<pre><code>run domain upper right lat: 15.0000\n</code></pre> Longitude superior do recorte<pre><code>run domain upper right lon: -25.999998\n</code></pre> Resolu\u00e7\u00e3o em graus na longitude<pre><code>run domain resolution dx: 0.05\n</code></pre> Resolu\u00e7\u00e3o em graus na latitude<pre><code>run domain resolution dy: 0.05\n</code></pre> Endere\u00e7o onde s\u00e3o encontrados os plugins dos modelos (arquivos com a extens\u00e3o .model)<pre><code>scantec tables: /scratchin/grupos/das/home/luiz.sapucci/SCANTEC-2.1.0/tables\n</code></pre> Diret\u00f3rio de sa\u00edda dos resultados do SCANTEC<pre><code>Output directory: /scratchin/grupos/das/home/luiz.sapucci/SCANTEC-2.1.0/dataout/ETA\n</code></pre> Nome do arquivo de configura\u00e7\u00e3o dos dados de refer\u00eancia<pre><code>Reference Model Name: ETA_ams_05km_22levs\n</code></pre> Endere\u00e7o dos arquivos de an\u00e1lise usados como refer\u00eancia na avalia\u00e7\u00e3o das previs\u00f5es, bem como as m\u00e1scaras (i.e., %y4%m2%d2%h2 indicando a data no formato YYYYMMDD) com a formata\u00e7\u00e3o das datas nos nomes dos arquivos<pre><code>Reference file: /dados/das/public/SCANTEC/TestCase/ETA/Eta_ams_05km202004/%d2/%h2/eta_05km_%y4%m2%d2%h2+%y4%m2%d2%h2.ctl\n</code></pre> Quantidade de vers\u00f5es dos modelos ou de diferentes modelos em avalia\u00e7\u00e3o<pre><code>Experiments: 1\n</code></pre> Tr\u00eas informa\u00e7\u00f5es em cada linha indicando o (1) nome do arquivo de configura\u00e7\u00e3o, (2) o label do experimento e (3) o endere\u00e7o das previs\u00f5es em avalia\u00e7\u00e3o, bem como a formata\u00e7\u00e3o das datas nos nomes dos arquivos<pre><code>ETA_ams_05km_22levs EXP01 /dados/das/public/SCANTEC/TestCase/ETA/Eta_ams_05km202004/%d2/%h2/eta_05km_%y4%m2%d2%h2+%fy4%fm2%fd2%fh2.ctl\n</code></pre> Uma op\u00e7\u00e3o de usar ou n\u00e3o a climatologia no c\u00e1lculo da CCA, sendo 1 para usar e 0 para n\u00e3o usar<pre><code>Use Climatology: 0\n</code></pre> Nome do arquivo de configura\u00e7\u00e3o dos dados de refer\u00eancia<pre><code>Climatology Model Name: AGCM_CLIMATOLOGY.model\n</code></pre> Endere\u00e7o dos arquivos de climatologia usado no c\u00e1lculo do CCA, bem como a formata\u00e7\u00e3o das datas nos nomes dos arquivos<pre><code>Climatology file: /dados/das/public/SCANTEC/climatologia/climatologia50yr.%mc.ctl\n</code></pre>"},{"location":"resol_problemas/","title":"Resolu\u00e7\u00e3o de Problemas","text":""},{"location":"resol_problemas/#resolucao-de-problemas","title":"Resolu\u00e7\u00e3o de Problemas","text":"<p>A fim de fornecer aos usu\u00e1rios do SCANTEC meios para realizar a investiga\u00e7\u00e3o de erros que podem ocorrer durante o uso do sistema, nesta p\u00e1gina est\u00e3o elencadas as rotinas que utilizam a instru\u00e7\u00e3o <code>STOP</code>, al\u00e9m de uma tabela com os c\u00f3digos de erro que o SCANTEC utiliza e os c\u00f3digos correspondentes obtidos a partir do uso do comando <code>echo $?</code> no Shell Bash do Linux. Estas informa\u00e7\u00f5es podem ser \u00fateis para se identificar poss\u00edveis fontes de problemas. Recomenda-se aos usu\u00e1rios a abertura de issues dentro do projeto SCANTEC para que sejam registrados os problemas que podem ser encontrados. Antes de abrir uma nova issue, verifique antes a exist\u00eancia de outras issues com problema semelhantes.</p>"},{"location":"resol_problemas/#lista-de-possiveis-erros-e-fontes-de-investigacao","title":"Lista de Poss\u00edveis Erros e Fontes de Investiga\u00e7\u00e3o","text":"<p>As rotinas a seguir fazem uso da instru\u00e7\u00e3o <code>STOP</code>. Em geral, os escopos onde esta instru\u00e7\u00e3o \u00e9 utilizada correspondem \u00e0 verifica\u00e7\u00e3o da exist\u00eancia de arquivos (e.g., arquivos namelists <code>scantec.conf</code> e <code>scantec.vars</code>), verifica\u00e7\u00e3o do carregamento de arquivos e testes de aloca\u00e7\u00e3o de arrays. A forma como o SCANTEC est\u00e1 estruturado, inclui a utiliza\u00e7\u00e3o de subrotinas para realizar a interrup\u00e7\u00e3o do programa (vide as subrotinas <code>die0_</code>, <code>die2_</code> e <code>die4_</code> na rotina <code>m_inpack.F90</code>), caso algum problema seja encontrado. Por\u00e9m, atualmente, estas rotinas n\u00e3o s\u00e3o utilizadas em todas as partes do SCANTEC, o que pode tornar o processo de debug um pouco menos objetivo: </p> <ul> <li><code>scan_coreMOD.f90</code></li> <li><code>scan_dataMOD.f90</code></li> <li><code>scan_ModelPlugin.f90</code></li> <li><code>scan_readModel.f90</code></li> <li><code>scantec_module.f90</code></li> <li><code>varType.f90</code></li> <li><code>MathExpress.f90</code></li> <li><code>m_inpak90.F90</code></li> <li><code>scan_UtilsMOD.f90</code></li> </ul> <p>Para contornar esse problema, para cada instru\u00e7\u00e3o <code>STOP</code>, foram atribu\u00eddos valores decimais que podem ser utilizados para mapear as se\u00e7\u00f5es do c\u00f3digo onde elas ocorrem.</p>"},{"location":"resol_problemas/#tabela-de-codigos-de-erros-do-scantec","title":"Tabela de C\u00f3digos de Erros do SCANTEC","text":"<p>Na tabela a seguir, s\u00e3o relacionados os c\u00f3digos decimais da instru\u00e7\u00e3o <code>STOP</code> das rotinas elecandas na se\u00e7\u00e3o anterior e do comando <code>echo $?</code>, com os seus respectivos c\u00f3digos hexadecimais. Observe que o \"lowest byte\" do c\u00f3digo hexadecimal da instru\u00e7\u00e3o <code>STOP</code> \u00e9 exatamente o c\u00f3digo hexadecimal do comando <code>echo $?</code>. Dessa forma pode-se fazer uma correspond\u00eancia entre os c\u00f3digos, apesar de haver depend\u00eancia quanto ao compilador, sistema operacional e processador utilizado. Como refer\u00eancia, os c\u00f3digos foram gerados utilizando-se o Shell GNU Bash, version 5.2.2(1)-release (x86_64-pc-linux-gnu) do Ubuntu 22.10 (kernel Linux 5.19.0-23-generic), compilador GNU Fortran (Ubuntu 9.5.0-1ubuntu3) 9.5.0 e processador Intel Core i7-4790.</p> <p>Na imagem a seguir, \u00e9 apresentado um exemplo de execu\u00e7\u00e3o do SCANTEC, em que foi gerado o c\u00f3digo <code>99038</code> a partir de uma instru\u00e7\u00e3o <code>STOP</code> (esse c\u00f3digo indica que o arquivo <code>scantec.conf</code> n\u00e3o foi encontrado). Imediatamente ap\u00f3s a obten\u00e7\u00e3o do c\u00f3digo, foi executado o comando <code>echo $?</code>, a partir do qual foi obtido o c\u00f3digo <code>222</code>. Utilizando-se uma calculadora que converte n\u00fameros decimais em hexadecimais, pode-se verificar que o n\u00famero decimal <code>99038</code> corresponde ao n\u00famero hexadecimal <code>182DE</code> e que o n\u00famero decimal <code>222</code> corresponde ao n\u00famero hexadecimal <code>DE</code> (que \u00e9 o \"lowest byte\" do n\u00famero <code>182DE</code>). Utilizando-se a tabela abaixo, pode-se verificar que a correspond\u00eancia entre os dois c\u00f3digos (<code>182DE</code> e <code>DE</code>) indica a \"Mensagem ou Motivo: Erro arquivo <code>scantec.conf</code>  n\u00e3o encontrado\", proveniente da rotina <code>scan_UtilsMOD.f90</code>.</p> <p></p> <p>De acordo com o exemplo apresentado, utilize a tabela a seguir para encontrar o c\u00f3digo <code>STOP</code> emitido pelo SCANTEC e o seu correspondente c\u00f3digo emitido pelo comando <code>echo $?</code>. A correspond\u00eancia \u00e9 realizada pelos n\u00fameros hexadecimais referentes aos c\u00f3digos (representados pelos n\u00fameros decimais).</p> C\u00f3digo <code>STOP</code> (decimal) C\u00f3digo <code>STOP</code> (hexadecimal) C\u00f3digo <code>echo $?</code> (decimal) C\u00f3digo <code>echo $?</code> (hexadecimal) Mensagem ou Motivo Fun\u00e7\u00e3o/Subrotina/Rotina 99000 182B8 184 B8 Erro <code>'ERROR: Analisys Time Step should be less or equal to Forecast Time Step'</code> rotina <code>scan_coreMOD.f90</code> 99001 182B9 185 B9 Erro carregamento <code>scanVarsConf</code> subrotina <code>data_config</code> em <code>scan_dataMOD.f90</code> 99002 182BA 186 BA Arquivo <code>scantec.table</code> n\u00e3o encontrado rotina <code>scan_ModelPlugin.f90</code> 99003 182BB 187 BB Arquivo de defini\u00e7\u00e3o do modelo n\u00e3o encontrado rotina <code>scan_ModelPlugin.f90</code> 99004 182BC 188 BC Erro leitura <code>label</code> (<code>i90_label</code>, <code>GDef%DName</code>) rotina <code>scan_ModelPlugin.f90</code> 99005 182BD 189 BD Erro leitura <code>gint</code> (<code>i90_gint</code>, <code>GDef%num</code>) rotina <code>scan_ModelPlugin.f90</code> 99006 182BE 190 BE Erro leitura <code>mapping</code> (<code>i90_gtoken</code>, <code>gdef%mapping</code>) rotina <code>scan_ModelPlugin.f90</code> 99007 182BF 191 BF Erro leitura <code>start_coord</code> (<code>i90_gfloat</code>, <code>gdef%start_coord</code>) rotina <code>scan_ModelPlugin.f90</code> 99008 182C0 192 C0 Erro leitura <code>incr_coord</code> (<code>i90_gfloat</code>, <code>gdef%incr_coord</code>) rotina <code>scan_ModelPlugin.f90</code> 99009 182C1 193 C1 Erro aloca\u00e7\u00e3o array <code>GDef%coord(GDef%num)</code> rotina <code>scan_ModelPlugin.f90</code> 99010 182C2 194 C2 Erro subrotina <code>GetLinCoords</code> rotina <code>scan_ModelPlugin.f90</code> 99011 182C3 195 C3 Erro aloca\u00e7\u00e3o array <code>GDef%coord(GDef%num)</code> rotina <code>scan_ModelPlugin.f90</code> 99012 182C4 196 C4 Erro subrotina <code>GetLevelsCoord</code> rotina <code>scan_ModelPlugin.f90</code> 99013 182C5 197 C5 Arquivo de defini\u00e7\u00e3o do modelo n\u00e3o encontrado rotina <code>scan_readModel.f90</code> 99014 182C6 198 C6 Erro carregamento do arquivo de defini\u00e7\u00e3o do modelo (<code>i90_LoadF</code>) rotina <code>scan_readModel.f90</code> 99015 182C7 199 C7 Erro leitura <code>label</code> (<code>i90_label</code>) subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99016 182C8 200 C8 Erro leitura <code>num</code> (<code>GDef%num</code>) subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99017 182C9 201 C9 Erro leitura <code>mapping</code> <code>i90_GToken(GDef%mapping,ierr)</code> subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99018 182CA 202 CA Erro leitura <code>start_coord</code> (<code>Gdef%start_coord</code>) subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99019 182CB 203 CB Erro leitura <code>incr_coord</code> (<code>Gdef%incr_coord</code>) subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99020 182CC 204 CC Erro aloca\u00e7\u00e3o array <code>GDef%coord(GDef%num)</code> subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99021 182CD 205 CD Erro chamada <code>GetLinCoords</code> subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99022 182CE 206 CE Erro aloca\u00e7\u00e3o array <code>GDef%coord(GDef%num)</code> subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99023 182CF 207 CF Erro chamada <code>GetLevelsCoord</code> subrotina <code>GetDef</code> em <code>scan_readModel.f90</code> 99024 182D0 208 D0 Erro <code>'Model Name or Model Type not found!'</code> fun\u00e7\u00e3o <code>getModel_</code> em <code>scantec_module.f90</code> 99025 182D1 209 D1 Erro <code>'unknow Experient Name'</code> fun\u00e7\u00e3o <code>getField_</code> em <code>scantec_module.f90</code> 99026 182D2 2010 D2 Erro <code>'unknow Experiment Name'</code>, fun\u00e7\u00e3o <code>getBitMap_</code> em <code>scantec_module.f90</code> 99027 182D3 211 D3 Erro <code>'Dimension not found in' .model</code> fun\u00e7\u00e3o <code>getDimVec_</code> em <code>scantec_module.f90</code> 99028 182D4 212 D4 Erro <code>'ERROR: wrong type, should be of</code>scalar<code>type '</code> subrotina <code>get0d</code> em <code>varType.f90</code> 99029 182D5 213 D5 Erro <code>'ERROR: wrong type, should be of</code>array1D<code>type '</code> subrotina <code>get1d</code> em <code>varType.f90</code> 99030 182D6 214 D6 Erro <code>'ERROR: wrong type, should be of</code>array1D<code>type '</code> subrotina <code>get2d</code> em <code>varType.f90</code> 99031 182D7 215 D7 Erro <code>'ERROR: wrong type, should be of</code>array1D<code>type '</code> subrotina <code>get3d</code> em <code>varType.f90</code> 99032 182D8 216 D8 Erro <code>'not initialized'</code> subrotina <code>infix2postfix</code> em <code>MathExpress.f90</code> 99033 182D9 217 D9 Erro <code>'not initialized'</code> subrotina <code>evalPostFixS_</code> em <code>MathExpress.f90</code> 99034 182DA 218 DA Erro <code>'not initialized'</code> subrotina <code>evalPostfixA_</code> em <code>MathExpress.f90</code> 99035 182DB 219 DB <code>STOP</code> subrotina <code>die0_</code> em <code>m_inpack.F90</code> 99036 182DC 220 DC <code>STOP</code> subrotina <code>die2_</code> em <code>m_inpack.F90</code> 99037 182DD 221 DD <code>STOP</code> subrotina <code>die4_</code> em <code>m_inpack.F90</code> 99038 182DE 222 DE Erro arquivo <code>scantec.conf</code> n\u00e3o encontrado rotina <code>scan_UtilsMOD.f90</code>"},{"location":"scanplot/","title":"Visualiza\u00e7\u00e3o","text":""},{"location":"scanplot/#visualizacao-de-resultados-usando-o-scanplot","title":"Visualiza\u00e7\u00e3o de resultados usando o SCANPLOT","text":"<p>O SCANPLOT \u00e9 um m\u00f3dulo escrito em linguagem Python preparado para ler e plotar as tabelas e os arquivos bin\u00e1rios com as estat\u00edsticas do SCANTEC. O seu uso pode ser feito por meio da linha de comando ou atrav\u00e9s do Jupyter notebook. O SCANPLOT transforma os resultados do SCANTEC em estruturas de dados como dataframes e datasets, podendo ser facilmente extendido a partir da introdu\u00e7\u00e3o de fun\u00e7\u00f5es para a plotagem dos resultados na forma como o usu\u00e1rio precisar. Para informa\u00e7\u00f5es detalhadas sobre a vers\u00e3o SCANPLOT V1.1.0a utiliza nesta release do SCANTEC, acesse a p\u00e1gina do projeto em https://gad-dimnt-cptec.github.io/SCANPLOT/.</p>"},{"location":"scanplot/#configuracao-do-ambiente-para-utilizacao-do-scanplot","title":"Configura\u00e7\u00e3o do ambiente para utiliza\u00e7\u00e3o do SCANPLOT","text":"<p>Aten\u00e7\u00e3o</p> <p>As instru\u00e7\u00f5es a seguir sugerem a utiliza\u00e7\u00e3o do SCANPLOT a partir da m\u00e1quina Ilopolis do CPTEC. Para uso em outras m\u00e1quinas, as instru\u00e7\u00f5es de uso podem ser diferentes. Para os usu\u00e1rios que desejam utilizar o SCANPLOT em suas m\u00e1quinas pessoais, recomenda-se seguir as instru\u00e7\u00f5es de instala\u00e7\u00e3o e uso que se encontram na p\u00e1gina do projeto em https://gad-dimnt-cptec.github.io/SCANPLOT/.</p>"},{"location":"scanplot/#maquinas-ilopolis-e-itapemirim","title":"M\u00e1quinas Ilopolis e Itapemirim","text":"<p>Para usar o SCANPLOT na m\u00e1quina Ilopolis, \u00e9 necess\u00e1rio configurar o ambiente Python <code>DASSCANPLOT</code> para a sua conta a partir da m\u00e1quina Itapemirim. A configura\u00e7\u00e3o inicial do ambiente de execu\u00e7\u00e3o \u00e9 feito da seguinte forma e \u00e9 necess\u00e1ria apenas na primeira vez. N\u00e3o se esque\u00e7a de substituir a palavra <code>&lt;usuario&gt;</code> pelo seu nome de usu\u00e1rio na m\u00e1quina.</p> <ol> <li> <p>Fa\u00e7a login na m\u00e1quina Itapemirim:</p> Comando <pre><code>ssh &lt;usuario&gt;@itapemirim.cptec.inpe.br -XC\n</code></pre> </li> <li> <p>Crie a seguinte estrutura de diret\u00f3rios em <code>/scripts/das/$USER</code>:</p> Comando <pre><code>cd /scripts/das/$USER\nmkdir conda\ncd conda\nmkdir envs pkgs\n</code></pre> <p>Dicas</p> <ul> <li>Depois disso verifique se no diret\u00f3rio <code>/scripts/das/$USER/conda</code> existem os diret\u00f3rios <code>envs</code> e <code>pkgs</code>;</li> <li>Caso n\u00e3o exista o diret\u00f3rio <code>/scripts/das/$USER</code> \u00e9 preciso entrar em contato com o suporte para que seu usu\u00e1rio seja adicionado no grupo <code>das</code> e para que esse diret\u00f3rio seja criado;</li> </ul> </li> <li> <p>Crie o arquivo <code>$HOME/.condarc</code> contendo as seguintes informa\u00e7\u00f5es:</p> <pre><code>envs_dirs:\n- /scripts/das/conda/envs\n- /scripts/das/&lt;usuario&gt;/conda/envs\npkgs_dirs:\n- /scripts/das/&lt;usuario&gt;/conda/pkgs\nchannels:\n- conda-forge\n- defaults\n</code></pre> </li> <li> <p>Em seguida, fa\u00e7a logout e fa\u00e7a login novamente na m\u00e1quina Itapemirim;</p> </li> <li> <p>Na Itapemirim, execute os comandos para registrar o ambiente <code>DASSCANPLOT</code> no Jupyter notebook:</p> Comando <pre><code>conda activate DASSCANPLOT\npython -m ipykernel install --user --name DASSCANPLOT --display-name DASSCANPLOT\n</code></pre> </li> </ol>"},{"location":"scanplot/#maquina-pessoal","title":"M\u00e1quina Pessoal","text":"<p>Para utilizar o SCANPLOT em m\u00e1quina uma m\u00e1quina pessoal (e.g., workstation ou notebook), siga os procedimentos abaixo:</p> <p>Aten\u00e7\u00e3o</p> <p>A realiza\u00e7\u00e3o destes procedimentos, requer a instala\u00e7\u00e3o da distribui\u00e7\u00e3o Python Anaconda ou Miniconda.</p> <ol> <li>Entre no diret\u00f3rio <code>SCANTEC-2.1.0/scanplot</code> e utilize o arquivo <code>environment.yml</code> para criar um ambiente Python para a utiliza\u00e7\u00e3o do SCANPLOT:</li> </ol> <pre><code>cd SCANTEC-2.1.0/scanplot\nconda env create -f environment.yml\n</code></pre> <ol> <li>Com o ambiente <code>SCANPLOT</code> criado, ative o ambiente:</li> </ol> <pre><code>conda activate SCANPLOT\n</code></pre> <ol> <li>Abra o arquivo <code>SCANPLOT.ipynb</code>:</li> </ol> <pre><code>jupyter-notebook SCANPLOT.ipynb\n</code></pre>"},{"location":"scanplot/#utilizacao-do-scanplot-na-maquina-ilopolis","title":"Utiliza\u00e7\u00e3o do SCANPLOT na m\u00e1quina Ilopolis","text":"<p>Depois de configurado o ambiente na m\u00e1quina Itapemirim, utilize o Jupyter notebook dispon\u00edvel a partir da m\u00e1quina Ilopolis:</p> <ol> <li>Acesse a plataforma do Jupyter em seu navegador de internet pelo endere\u00e7o: http://ilopolis.cptec.inpe.br/hub/login;</li> <li>Insira as suas credenciais (as mesmas utilizadas para acessar a m\u00e1quina Itepemirim);</li> <li>O sistema abrir\u00e1 a \u00e1rvore de diret\u00f3rios do seu diret\u00f3rio <code>/home/&lt;usuario&gt;</code>. Localize o diret\u00f3rio onde foi instalado o SCANTEC-2.1.0. Navegue at\u00e9 o diret\u00f3rio <code>scanplot</code> onde estar\u00e1 disponivel o notebook <code>SCANPLOT.ipynb</code> e abra-o; </li> <li>Com o arquivo aberto dentro do Jupyter, localize a aba <code>Kernel</code> e em seguida aponte para o item <code>Change kernel</code> e selecione a op\u00e7\u00e3o <code>DASSCANPLOT</code>. O kernel <code>DASSCANPLOT</code>, necess\u00e1rio para a execu\u00e7\u00e3o desse notebook, ficar\u00e1 indicado na caixinha no canto superior direito da tela;</li> <li> <p>Utilize o notebook executando cada uma das c\u00e9luas;</p> <p>Nota</p> <p>Caso n\u00e3o tenha familiaridade com o Jupyter, observe que para executar os comandos basta clicar sucessivamente no bot\u00e3o <code>Run</code> da interface, o cursor indicar\u00e1 o comando sendo executado e os resultados s\u00e3o apresentados nas linhas posteriores ao comando nessa mesma p\u00e1gina. Observe que em algumas c\u00e9lulas, \u00e9 necess\u00e1rio ajustar algumas op\u00e7\u00f5es e os dados para o seu usu\u00e1rio e o local onde o SCANTEC foi executado.</p> </li> <li> <p>Acompanhe os resultados e salve as figuras que desejar em seu disco como convencionalmente \u00e9 feito com seu navegador.</p> </li> </ol> <p>Assista no video a seguir, um exemplo de utiliza\u00e7\u00e3o do SCANPLOT a partir da m\u00e1quina Itapemirim do CPTEC.</p> <p></p> <p>Na release V2.0.0 do SCANTEC, tamb\u00e9m est\u00e1 dispon\u00edvel um tutorial que pode ser utilizado (com algumas diferen\u00e7as em rela\u00e7\u00e3o \u00e0 release mais atual) para a instala\u00e7\u00e3o e utiliza\u00e7\u00e3o de todo o sistema via notebook do Jupyter. Para isso abra o arquivo <code>Tutorial/Tutorial_SCANTEC.ipynb</code> e siga as instru\u00e7\u00f5es na p\u00e1gina. Esse mesmo tutorial pode se obtido a partir do endere\u00e7o Tutorial.tar.</p>"},{"location":"uso/","title":"Uso","text":""},{"location":"uso/#uso","title":"Uso","text":"<p>O SCANTEC possui alguns arquivos de configura\u00e7\u00e3o (namelists) onde s\u00e3o definidos os par\u00e2metros utilizados nas avalia\u00e7\u00f5es num\u00e9ricas. Estes arquivos s\u00e3o os seguintes:</p> <ul> <li>Arquivo namelist <code>scantec.conf</code>: arquivo com os par\u00e2metros da avalia\u00e7\u00e3o (e.g., datas, nomes dos arquivos etc);</li> <li>Arquivo namelist <code>scantec.vars</code>: arquivo com os nomes das vari\u00e1veis e suas equival\u00eancias utilizadas na avalia\u00e7\u00e3o;</li> <li>Arquivos tables <code>*.model</code>: arquivos de defini\u00e7\u00e3o das grades dos modelos utilizados na avalia\u00e7\u00e3o.</li> </ul> <p>Todos estes arquivos devem ser revisados antes de se iniciar uma avalia\u00e7\u00e3o. Para uma descri\u00e7\u00e3o mais detalhada sobre os par\u00e2metros e elementos definidos nestes arquivos, veja a p\u00e1gina Namelist.</p> <p>Nota</p> <p>Para os usu\u00e1rios internos que usam as maquinas virtuais n\u00e3o \u00e9 necess\u00e1rio baixar os arquivos de testcase, pois eles est\u00e3o disponiveis na maquina no /share, para os usu\u00e1rios externos ao INPE esses dados s\u00e3o baixados por FTP, na primeira ocasi\u00e3o de teste com o script que roda o scantec. Os dados necess\u00e1rios ( arquivos de an\u00e1lises, previs\u00f5es e climatologia) s\u00e3o baixados e colocados no datain/Test{Model} e est\u00e3o j\u00e1 configurados no 'scantec.conf' para esses locais. Para mais informa\u00e7\u00f5es sobre a utiliza\u00e7\u00e3o do arquivo <code>scantec.conf</code>, veja a p\u00e1gina Namelist.</p> <p>Para utilizar o SCANTEC \u00e9 preciso editar o arquivo namelist <code>SCANTEC/core/scantec.conf</code> e modificar as informa\u00e7\u00f5es para refletir os dados do usu\u00e1rio. O arquivo deve ser modificado e salvo dentro do diretorio <code>SCANTEC/bin</code>, junto com o arquivo execut\u00e1vel <code>scantec.x</code>. Para edi\u00e7\u00e3o do arquivo namelist <code>scantec.conf</code>, h\u00e1 um conjunto de palavras-chave que antecedem a informa\u00e7\u00e3o requerida pelo sistema. O usu\u00e1rio deve procurar por essas palavras-chave e atribuir os valores desejados.</p> <p>Nas instru\u00e7\u00f5es apresentadas a seguir, s\u00e3o mostrados os procedimentos utilizados para preparar o SCANTEC para um tipo de avalia\u00e7\u00e3o, utilizando dados de exemplo.</p> <p>Informa\u00e7\u00e3o</p> <p>Os arquivos de exemplo utilizados na avalia\u00e7\u00e3o com o SCANTEC, est\u00e3o dispon\u00edveis no disco NetApp do CPTEC, acess\u00edvel a partir das m\u00e1quinas virtuais do centro e Egeon. Os usu\u00e1rios externos ao INPE que desejam utilizar o SCANTEC em suas avalia\u00e7\u00f5es, dever\u00e3o preparar os seus pr\u00f3prios arquivos de an\u00e1lises, previs\u00f5es e climatologias.</p> <ol> <li> <p>Para utilizar o sistema entre no diret\u00f3rio <code>bin</code> do SCANTEC:</p> Comando <pre><code>cd SCANTEC/bin/\n</code></pre> </li> <li> <p>Crie uma c\u00f3pia do arquivo <code>SCANTEC/core/scantec.conf</code> para o diret\u00f3rio <code>SCANTEC/bin</code> e modifique apropriadamente as informa\u00e7\u00f5es solicitadas (no exemplo, est\u00e1 sendo utilizado o editor <code>vi</code>, mas o usu\u00e1rio pode utilizar o editor que melhor lhe convier):</p> Comando <pre><code>cp ../core/scantec.conf scantec.conf\nvi scantec.conf\n</code></pre> </li> <li> <p>Execute o SCANTEC com o comando (na aba Resultado a seguir, \u00e9 apresentado apenas um exemplo do que o SCANTEC far\u00e1 quando configurado para a avalia\u00e7\u00e3o de um per\u00edodo espec\u00edfico):</p> ComandoResultado <pre><code>./scantec.x\n</code></pre> <pre><code> !~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!\n !                         Climatology Not Found                       !\n !         The mean reference field will be used as climatology        !\n !~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!\n !~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!\n !                          Running scantec                            !\n !     Please wait while the system is performing the statistics       !\n !~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!\n   Analisys   Forecast        fct\n 2014080500 2014080500        00h\n 2014080500 2014080600        24h\n 2014080500 2014080700        48h\n 2014080500 2014080800        72h\n 2014080512 2014080512        00h\n 2014080512 2014080612        24h\n 2014080512 2014080712        48h\n 2014080512 2014080812        72h\n 2014080600 2014080600        00h\n 2014080600 2014080700        24h\n 2014080600 2014080800        48h\n 2014080600 2014080900        72h\n</code></pre> <p>Aten\u00e7\u00e3o</p> <p>No Resultado do exemplo acima, observe que foi emitida a mensagem <code>Climatology Not Found The mean reference field will be used as climatology</code>, o que indica que um arquivo de climatologia n\u00e3o foi inidicado para uso na avalia\u00e7\u00e3o e que uma m\u00e9dia dos campos de refer\u00eancia ser\u00e3o utilizados para este prop\u00f3sito. A climatologia \u00e9 utilizada para o c\u00e1lculo do Coeficiente de Correla\u00e7\u00e3o de Anomalia.</p> <p>Nota</p> <p>No exemplo, observe que o SCANTEC foi executado para realizar avalia\u00e7\u00f5es objetivas a partir de arquivos de previs\u00f5es num\u00e9ricas para at\u00e9 72 horas, entre os dias 2014080500 e 2014080600, a cada 12 horas. Verifique novamente o arquivo namelist <code>scantec.conf</code> e compare os valores dos par\u00e2metros com as informa\u00e7\u00f5es impressas na tela.</p> </li> <li> <p>De outra forma, pode-se tamb\u00e9m utilizar o script <code>run_scantec.sh</code>. Este script modifica o arquivo namelist <code>scantec.conf</code> com valores pr\u00e9-definidos, executa o arquivo bin\u00e1rio <code>scantec.x</code> e armazenas as informa\u00e7\u00f5es em um arquivo de log. Esse script possui uma s\u00e9rie de testcases para permitir a valida\u00e7\u00e3o da vers\u00e3o instalada pelo usu\u00e1rio:</p> ComandoResultado <pre><code>./run_scantec.sh\n</code></pre> <pre><code>Sistema Comunit\u00e1rio de Avalia\u00e7\u00e3o de modelos Num\u00e9ricos de Tempo e Clima (SCANTEC)\n\nA op\u00e7\u00e3o TestCase n\u00e3o foi informada!\n\nUso:\n./run_scantec.sh 1 - TestCase do BRAMS         (Jul/2023)\n./run_scantec.sh 2 - TestCase do ETA           (Jul/2023)\n./run_scantec.sh 3 - TestCase do WRF           (Jul/2023)\n./run_scantec.sh 4 - TestCase do BAM           (Jul/2023)\n./run_scantec.sh 5 - Compara WRF/ETA/BRAMS/BAM (Jul/2023)\n./run_scantec.sh 6 - TestCase do MONAN         (Jan/2025)\n./run_scantec.sh 7 - Dados definidos pelo usu\u00e1rio\n</code></pre> </li> </ol> <p></p> <p>Nota</p> <p>A correta utiliza\u00e7\u00e3o do script <code>run_scantec.sh</code> depender\u00e1 do acesso aos dados requeridos, sejam eles provenientes dos testcases do SCANTEC ou informados pelo usu\u00e1rio.</p> <p>O conjunto de dados de testcase do SCANTEC n\u00e3o s\u00e3o distribu\u00eddos com a release devido ao seu tamanho, no entanto esse script est\u00e1 apto a baixar os dados do repositorio do CPTEC https://ftp1.cptec.inpe.br/pesquisa/das/scantec/TestCase_SCANTEC/ onde est\u00e3o disponiveis um conjunto de dados para testar os modelos listados acima.</p> <p>Na se\u00e7\u00e3o a seguir, e detalhada a utiliza\u00e7\u00e3o do SCANTEC a partir dos dados de testcase.</p>"},{"location":"uso/#execucao-do-scantec-com-os-dados-do-testcase","title":"Execu\u00e7\u00e3o do SCANTEC com os dados do testcase","text":"<p>Os dados de entrada do testcase para as 6 op\u00e7\u00f5es de modelos dispon\u00edveis (i.e., BRAMS, ETA, WRF, BAM e MONAN) est\u00e3o no disco NetApp do CPTEC, acess\u00edveis em locais diferentes a depender da m\u00e1quina utilizada:</p> <ul> <li>M\u00e1quinas virtuais (e.g., Itapemirim, Ilopolis, Colorado): <code>/share/das/dist/scantec/TestCase_SCANTEC/</code>;</li> <li>M\u00e1quina Egeon: <code>/pesq/share/das/dist/scantec/TestCase_SCANTEC/</code>;</li> <li>M\u00e1quina externas ao inpe: <code>https://ftp1.cptec.inpe.br/pesquisa/das/scantec/TestCase_SCANTEC/</code>.</li> </ul> <p>Aten\u00e7\u00e3o</p> <p>Na m\u00e1quina XC50, estes dados n\u00e3o est\u00e3o dispon\u00edveis, mas podem ser copiadas a partir das m\u00e1quinas Itapemirim ou Egeon.</p> <ol> <li> <p>Para utilizar o sistema (tanto local, quanto nas m\u00e1quinas virtuais) entre no diret\u00f3rio raiz da instala\u00e7\u00e3o do SCANTEC:</p> Comando <pre><code>cd SCANTEC/\n</code></pre> </li> </ol> <p>Aten\u00e7\u00e3o</p> <p>Nas m\u00e1quinas virtuais, \u00e9 preciso antes de rodar o run_scantec.sh apagar os diretorios do datain e criar links para os locais onde esses dadps est\u00e3o pois, caso contr\u00e1rio os dados (que j\u00e1 est\u00e3o na itapemerim) ser\u00e3o baixados via ftp ocupando espa\u00e7o desnecess\u00e1rio. Nesse caso \u00e9 preciso fazer a proxima a\u00e7\u00e3o, caso esteja em maquina sem acesso direto a esses dados pule essa etapa:</p> <ol> <li> <p>Se estiver rodando nas maquina virtuais (itapemirim,ilopolis, etc) fa\u00e7a:</p> Comando <pre><code>rmdir datain/TestBRAMS\nln -s /share/das/dist/scantec/TestCase_SCANTEC/BRAMS datain/TestBRAMS\nrmdir datain/TestETA\nln -s /share/das/dist/scantec/TestCase_SCANTEC/ETA datain/TestETA\nrmdir datain/TestWRF\nln -s /share/das/dist/scantec/TestCase_SCANTEC/WRF datain/TestWRF  \nrmdir datain/TestBAM\nln -s /share/das/dist/scantec/TestCase_SCANTEC/BAM_T666L64 datain/TestBAM\nrmdir datain/TestMONAN\nln -s /share/das/dist/scantec/TestCase_SCANTEC/MONAN datain/TestMONAN\nrmdir datain/climatologia\nln -s /share/das/dist/scantec/TestCase_SCANTEC/Climatologia datain/climatologia\n</code></pre> </li> <li> <p>Execute o script de execu\u00e7\u00e3o do SCANTEC com um par\u00e2metro na linha de comando:</p> Comando <pre><code>./run_scantec.sh [par\u00e2metro]\n</code></pre> <ul> <li> <p>Sendo esse par\u00e2metro uma das seguintes op\u00e7\u00f5es:</p> <ul> <li>1 - TestCase do BRAMS         (Jul/2023)</li> <li>2 - TestCase do ETA           (Jul/2023)</li> <li>3 - TestCase do WRF           (Jul/2023)</li> <li>4 - TestCase do BAM           (Jul/2023)</li> <li>5 - Compara WRF/ETA/BRAMS/BAM (Jul/2023)</li> <li>6 - TestCase do MONAN         (Jan/2025)</li> <li>7 - Dados definidos pelo usu\u00e1rio</li> </ul> </li> </ul> </li> </ol> <p>Para cada uma dessas op\u00e7\u00f5es, o script criar\u00e1 um novo arquivo namelist <code>SCANTEC/bin/scantec.conf</code>, onde ser\u00e3o ajustados os par\u00e2metros e informa\u00e7\u00f5es necess\u00e1rias para cada um dos experimentos, i.e., o per\u00edodo dos dados, o intervalo entre as an\u00e1lises, o intervalo entre as previs\u00f5es e o per\u00edodo de integra\u00e7\u00e3o dos modelos. O formato dos arquivos dispon\u00edveis para os testes \u00e9 determinado em arquivos alocados no diret\u00f3rio <code>tables</code>. Para cada novo modelo ou vers\u00e3o de modelo com diferente resolu\u00e7\u00e3o ou dom\u00ednio, novos arquivos <code>*.table</code> devem ser preparados e alocados no diret\u00f3rio <code>SCANTEC/tables</code>. Para mais informa\u00e7\u00f5es sobre como adicionar outros modelos, veja a se\u00e7\u00e3o intitulada Adicionando outras vers\u00f5es ou modelos no SCANTEC.</p> <p>Observe que a op\u00e7\u00e3o 5 faz uma intercompara\u00e7\u00e3o entre os modelos WRF, ETA BRAMS e BAM. Observe nos arquivos de saida \u00e9 possivel gerar gr\u00e1ficos que comparam o desempenho dos diferentes modelos avaliados. Obviamente que um pre requisito para essa intercompara\u00e7\u00e3o \u00e9 que todos os per\u00edodos dos dados dispon\u00edveis para os diferentes modelos devem ser o mesmo. Observe esse detalhe ao elaborar avalia\u00e7\u00f5es de intercompara\u00e7\u00f5es de modelos. </p> <p>As informa\u00e7\u00f5es de sa\u00edda dos testcases do SCANTEC s\u00e3o escritas no diret\u00f3rio <code>SCANTEC/dataout/TestMODEL</code> onde <code>MODEL</code> pode ser <code>BRAMS</code>, <code>WRF</code>, <code>MONAN</code>,  <code>ETA</code> ou <code>BAM</code>, dependendo da op\u00e7\u00e3o escolhida acima. Para a op\u00e7\u00e3o 5 o diretorio est\u00e1 seetado para se chamar TestCompara. Por exemplo:</p> <pre><code>ls -ltr SCANTEC/dataout/TestMODEL\ntotal 17292\n-rw-rw-r-- 1 user group    1154 Jun 28 17:20 RMSEEXP01_20140805002014080600F.ctl\n-rw-rw-r-- 1 user group    1154 Jun 28 17:20 VIESEXP01_20140805002014080600F.ctl\n-rw-rw-r-- 1 user group    1154 Jun 28 17:20 MEANEXP01_20140805002014080600F.ctl\n-rw-rw-r-- 1 user group    1055 Jun 28 17:22 RMSEEXP01_20140805002014080600T.scan\n-rw-rw-r-- 1 user group    1055 Jun 28 17:22 VIESEXP01_20140805002014080600T.scan\n-rw-rw-r-- 1 user group    1055 Jun 28 17:22 ACOREXP01_20140805002014080600T.scan\n-rw-rw-r-- 1 user group 5864960 Jun 28 17:22 RMSEEXP01_20140805002014080600F.scan\n-rw-rw-r-- 1 user group 5864960 Jun 28 17:22 VIESEXP01_20140805002014080600F.scan\n-rw-rw-r-- 1 user group 5864960 Jun 28 17:22 MEANEXP01_20140805002014080600F.scan\n</code></pre> <p>No exemplo acima, s\u00e3o identificados os seguintes tipos de arquivos, todos resultantes de uma execu\u00e7\u00e3o do SCANTEC:</p> <ul> <li><code>RMSEEXP01_20140805002014080600F.ctl</code>: arquivo ascii (texto) descritor para o arquivo <code>RMSEEXP01_20140805002014080600F.scan</code>. Pode ser aberto no software GrADS;</li> <li><code>RMSEEXP01_20140805002014080600F.scan</code>: arquivo bin\u00e1rio com a distribui\u00e7\u00e3o espacial da estat\u00edstica RMSE (Root Mean Square Error, ou Raiz do Erro Quadr\u00e1tico M\u00e9dio);</li> <li><code>VIESEXP01_20140805002014080600T.scan</code>: arquivo ascci (texto) com uma tabela com o resultado do RMSE, calculado para cada uma das vari\u00e1veis escolhidas e ordenadas por tempo de previs\u00e3o para o per\u00edodo escolhido.</li> </ul> <p>Nota</p> <p>Dependendo do testcase escolhido, o tempo de execu\u00e7\u00e3o do SCANTEC pode ser diferente devido ao n\u00famero de pontos de grade a serem considerados na avalia\u00e7\u00e3o. Independente do n\u00famero de modelos utilizados em uma avalia\u00e7\u00e3o com o SCANTEC, sempre ser\u00e1 realizada a interpola\u00e7\u00e3o bilinear (espacial, horizontal) das grades para uma grade comum. Veja na p\u00e1gina Namelist os par\u00e2metros <code>run domain resolution dx</code> (ou <code>dx</code>) e <code>run domain resolution dy</code> (ou <code>dy</code>), os quais indicam a resolu\u00e7\u00e3o (em graus) para a qual as grades ser\u00e3o interpoladas. Na vertical, as vari\u00e1veis n\u00e3o s\u00e3o interpoladas, visto que elas s\u00e3o definidas por n\u00edveis de press\u00e3o como descrito no arquivo <code>SCANTEC/tables/scantec.vars</code>.</p>"},{"location":"uso/#utilizando-o-scantec-em-dados-netcdf","title":"Utilizando o SCANTEC em dados NetCDF","text":"<p>A atual vers\u00e3o do SCANTEC est\u00e1 apta para ler apenas dados nos formatos GRIB ou bin\u00e1rio (<code>.grb</code> ou <code>.bin</code>.), logo se a saida do p\u00f3s-processamento do modelo \u00e9 escrita no formato NetCDF (<code>.nc</code>) \u00e9 necess\u00e1rio um pr\u00e9-processamento nesses dados para depois serem avaliados no SCANTEC. Esse \u00e9 o caso dos dados do WRF, MPAS e MONAN. Para isso no diret\u00f3rio <code>scripts_uteis</code>, h\u00e1 um script chamado <code>nc2grb.sh</code>, que converte arquivos NetCDF para um conjunto de arquivos compat\u00edveis no formato GRIB (<code>.grb</code>, <code>.ctl</code>, <code>.gmp</code>). Esse script utiliza o script <code>lats4d.sh</code>, que permite recortar os dados espacialmente, temporalmente, por n\u00edveis de press\u00e3o e por vari\u00e1veis, facilitando o processamento dos arquivos brutos. Os dados dos modelos MONAN (Model for Ocean-laNd-Atmosphere predictioN) e WRF (Weather Research and Forecasting model) disponiveis no testacase foram pr\u00e9-processados usando esse script e o mesmo deve ser feito para outros arquivos que o usu\u00e1rio deseja avaliar no SCANTEC, que estejam no formato NetCDF.</p> <p>A atual vers\u00e3o do script <code>lats4d.sh</code> no diret\u00f3rio <code>SCANTEC/scripts_uteis</code>, est\u00e1 configurado para ler a vers\u00e3o  p\u00f3s-processada do MONAN v1.1.0 (dados brutos disponiveis no endere\u00e7o https://ftp1.cptec.inpe.br/pesquisa/das/victor.ranieri/MONANexp/MONAN_v1.1.0/, ~1,2 TB) e foi utilizado para gerar os arquivos GRIB dispon\u00edveis no testcase do MONAN (https://ftp1.cptec.inpe.br/pesquisa/das/scantec/TestCase_SCANTEC/MONAN, ~195 MB). </p> <p>Nota</p> <p>A presente vers\u00e3o dos scripts est\u00e1 ajustada para o modelo MONAN. Ajustes podem ser necess\u00e1rios para adaptar os scripts para as necessidades do usu\u00e1rio! </p> <p>Observe que foi feita nessa convers\u00e3o uma sele\u00e7\u00e3o de vari\u00e1veis e n\u00edveis do modelo visando deixar o arquivo mais leve para o download durante o testcase. Na m\u00e1quina Itapemirim, o script pode ser executado e testado da forma como est\u00e1. Fora da rede interna do CPTEC, \u00e9 preciso baixar os dados brutos (~1,2 TB) e modificar o endere\u00e7o de onde ele deve ser lido localmente. Os dados s\u00e3o gerados no diret\u00f3rio <code>datain/MONAN</code>. O dom\u00ednio dos dados \u00e9 o global, mas h\u00e1 um recorte sobre a Am\u00e9rica do Sul. Para utilizar este recorte, basta descomentar as linhas apropriadamente. Para executar o scritp fa\u00e7a:</p> <ol> <li> <p>Entre no diret\u00f3rio <code>scripts_uteis</code> onde o SCANTEC foi instalado:</p> Comando <pre><code>cd SCANTEC/scripts_uteis\n</code></pre> </li> <li> <p>Execute o script <code>nc2grb.sh</code>:</p> Comando <pre><code>nc2grb.sh\n</code></pre> </li> </ol> <p>Nota</p> <p>Para utilizar os dados do usu\u00e1rio, \u00e9 preciso modificar os endere\u00e7os das vari\u00e1veis a seguir:</p> <ul> <li><code>datain</code></li> <li><code>dataout</code></li> <li><code>dir_script</code></li> </ul>"},{"location":"uso/#executando-o-scantec-com-dados-do-usuario","title":"Executando o SCANTEC com dados do usu\u00e1rio","text":"<p>Para executar o script <code>run_scantec.sh</code> com as informa\u00e7\u00f5es inseridas pelo usu\u00e1rio, escolha a op\u00e7\u00e3o <code>7</code>. Mas antes, \u00e9 preciso editar o script e modificar apropriadamente algumas informa\u00e7\u00f5es. Veja a seguir:</p> <ol> <li> <p>Para utilizar o sistema (tanto no Tup\u00e3 como nas m\u00e1quinas virtuais) entre no diret\u00f3rio raiz da instala\u00e7\u00e3o do SCANTEC:</p> Comando <pre><code>cd SCANTEC/\n</code></pre> </li> <li> <p>Edite o script <code>run_scantec.sh</code>:</p> Comando <pre><code>vi run_scantec.sh\n</code></pre> <p>Modifique apropriadamente os grupos de vari\u00e1veis (Datas, Regi\u00f5es, Refer\u00eancias, An\u00e1lises, Quantidade de experimentos, Plugin experimento, Previs\u00f5es e Climatologia), conforme a seguir:</p> <pre><code>#--------------------------------------------------------------------#\n# Configura\u00e7\u00f5es do usu\u00e1rio (ALTERAR O QUE FOR NECESS\u00c1RIO)            #\n#--------------------------------------------------------------------#\n\n\n# Datas\ndatai=2016010100\ndataf=2016010500\npasso_analise=12\npasso_previsao=12\ntotal_previsao=120\n\n# Regi\u00f5es\nlat_low=-49.875 \nlon_low=-82.625 \nlat_up=11.375 \nlon_up=-35.375 \ndx=0.4  \ndy=0.4 \n\n# Refer\u00eancias\n# Plugin modelo\npl_model_refer=prefixo_tabela_modelo\n\n# An\u00e1lises\narq_refer=diretorio_dados/arquivo_anl.ctl\n\n# Quantidade de experimentos\nquant_exp=1\n\n# Plugin experimento\npl_model_exper=prefixo_tabela_modelo/arquivo_fct.ctl\n\n# Previ\u00f5es\narq_prev=diretorio_dados\n\n# Climatologia\nuse_climatologia=0\narq_clim=diretorio_climatologia/climatologia50yr.%mc.ctl\n</code></pre> </li> <li> <p>Em seguida, salve as modifica\u00e7\u00f5es no script <code>run_scantec.sh</code> e execute-o com a op\u00e7\u00e3o <code>7</code>:</p> ComandoResultado <pre><code>./run_scantec.sh 7\n</code></pre> <pre><code>&lt;&lt;&lt; INICIANDO SCANTEC &gt;&gt;&gt;        \n\n\n Configura\u00e7\u00f5es da avalia\u00e7\u00e3o:               \n ==========================                \n Data inicial:   2016010100                  \n Data final:     2016010500                  \n Passo an\u00e1lise:  12          \n Passo previs\u00e3o: 12         \n Total previs\u00e3o: 120         \n\n Regi\u00e3o:                                   \n Lat low: -49.875                       \n Lon low: -82.625                       \n Lat up:  11.375                        \n Lon up:  -35.375                        \n\n Quantidade de experimentos: 1  \n\n Num. plugin refer\u00eancia: prefixo_tabela_modelo \n An\u00e1lise:                                  \n diretorio_dados/arquivo_anl.ctl                              \n\n Num. plugin experimento: prefixo_tabela_modelo/arquivo_fct.ctl\n Previs\u00f5es:                                \n diretorio_dados                               \n\n Uso climatologia: 0     \n\n Resultados:                               \n /scripts/ensemble/SCANTEC/dataout/                          \n\n Arquivo de log:                           \n Log do processo: /scripts/ensemble/SCANTEC/logfile/scantec-20220628.17.30.log                \n ==========================                \n\n In\u00edcio do processamento: Tue Jun 28 17:30:01 GMT 2022\n\n Criando o arquivo de configura\u00e7\u00f5es em bin/scantec.conf\n\n Arquivo de configuracao criado com sucesso.\n\n Executando o scantec.x ...\n\n . . . \n\n Final do processo: Tue Jun 28 17:30:01 GMT 2022\n\n Log do processo: /scripts/ensemble/SCANTEC/logfile/scantec-20220628.17.30.log\n====================================================================================\n\n Fim do processo!\n</code></pre> </li> <li> <p>Para verificar os resultados de sa\u00edda do SCANTEC, liste os arquivos do diret\u00f3rio <code>SCANTEC/dataout</code>:</p> Comando <pre><code>ls SCANTEC/dataout\n</code></pre> </li> </ol> <p>Informa\u00e7\u00e3o</p> <p>Para visualizar os resultados gerados pelo SCANTEC, pode-se utilizar softwares como o GrADS (para visualiza\u00e7\u00e3o da distribui\u00e7\u00e3o espacial dos campos) e o GNUPlot (para a plotagem das tabelas). A partir da vers\u00e3o SCANTEC V2.0.0, recomenda-se a utiliza\u00e7\u00e3o do SCANPLOT (veja mais detalhes na p\u00e1gina Visualiza\u00e7\u00e3o de resultados usando o SCANPLOT ou no site do projeto em https://gad-dimnt-cptec.github.io/SCANPLOT/).</p>"},{"location":"uso/#adicionando-outras-versoes-ou-modelos-no-scantec","title":"Adicionando outras vers\u00f5es ou modelos no SCANTEC","text":"<p>Para adicionar uma nova vers\u00e3o de modelo \u00e0 lista das op\u00e7\u00f5es em que o sistema est\u00e1 preparado para processar (i.e., BRAMS, ETA, BAM), siga as instru\u00e7\u00f5es descritas nessa se\u00e7\u00e3o. Inicialmente, verifique se a vers\u00e3o desejada j\u00e1 n\u00e3o est\u00e1 implementada no sistema. Caso n\u00e3o esteja, para incluir uma nova vers\u00e3o, crie um novo arquivo com a extens\u00e3o <code>.model</code> dentro do diret\u00f3rio <code>SCANTEC/tables</code> com as informa\u00e7\u00f5es pertinentes \u00e0 vers\u00e3o do modelo a ser utilizado. Utilize um arquivo existente para saber como formatar o novo arquivo.</p> <p>Notas</p> <ul> <li>Observe que modelos com resolu\u00e7\u00f5es, recortes ou dom\u00edniois diferentes, ou mesmo com modifica\u00e7\u00f5es no n\u00famero de n\u00edveis p\u00f3s-processados, requerem ajustes para que o sistema seja capaz de ler os arquivos bin\u00e1rios;</li> <li>Ressalta-se que apenas arquivos bin\u00e1rios (<code>*.bin</code>) e GRIB1 (<code>*.grb</code>) s\u00e3o lidos pela atual vers\u00e3o do sistema. Arquivos no formato GRIB2 e NetCDF n\u00e3o s\u00e3o suportados pela vers\u00e3o SCANTEC V2.1.0. Caso o modelo que deseja adicionar n\u00e3o esteja nesses formatos, estes podem ser convertidos para os formatos bin\u00e1rio ou GRIB1 com o aux\u00edlio do script <code>lats4d</code> ou similares. </li> </ul> <p>A lista abaixo, elenca os modelos j\u00e1 implementados na vers\u00e3o SCANTEC V2.1.0 junto com os seus respectivos arquivos <code>table</code>, os quais podem servir como exemplo para criar outros:</p> <ul> <li>Modelo AGCM<sup>1</sup> TQ0062L028 (climatologia de 50 anos), p\u00f3s-processado em 18 n\u00edveis de press\u00e3o: <code>AGCM_TQ0062L028_50YR_CLIMATOLOGY_18levs.model</code>;</li> <li>Modelo AGCM TQ0126L028, p\u00f3s-processado em 9 n\u00edveis de press\u00e3o: <code>AGCM_TQ0126L028_9levs.model</code>;</li> <li>Modelo BAM TQ0299L064, p\u00f3s-processado em 18 n\u00edveis de press\u00e3o: <code>BAM_TQ0299L064_18levs.model</code>;</li> <li>Modelo BAM TQ0299L064, p\u00f3s-processado em 28 n\u00edveis de press\u00e3o: <code>BAM_TQ0299L064_28levs.model</code>;</li> <li>Modelo BAM TQ0666L064, p\u00f3s-processado em 33 n\u00edveis de press\u00e3o: <code>BAM_TQ0666L064_33levs.model</code>;</li> <li>Modelo BRAMS com 5km resolu\u00e7\u00e3o horizontal, p\u00f3s-processado em de 19 n\u00edveis de press\u00e3o: <code>BRAMS_5km_19levs.model</code>;</li> <li>Modelo ETA com 5km de resolu\u00e7\u00e3o horizontal, p\u00f3s-processado em 22 n\u00edveis de press\u00e3o: <code>ETA_ams_05km_22levs.model</code>;</li> <li>Modelo CFSR T382L64, p\u00f3s-processado em 33 n\u00edveis de press\u00e3o: <code>CFSR_T382L064_CLIMATOLOGY_37levs.model</code>;</li> <li>Modelo GFS<sup>2</sup> 0,25 graus, p\u00f3s-processado em 22 n\u00edveus de press\u00e3o: <code>GFS_0p25_5levs.model</code>.</li> </ul> <p>Para adicionar um novo modelo basta editar um dos arquivos acima, escolhendo-se aquele que mais se assemelha com o modelo desejado e fazer os ajustes necess\u00e1rios. Salve o arquivo modificado com um nome apropriado (incluindo a extens\u00e3o <code>.model</code>) dentro do diret\u00f3rio <code>SCANTEC/tables</code>, e no arquivo namelist <code>scantec.conf</code> (ou no script <code>run_scantec.sh</code>, caso esteja sendo utilizado), assegure-se de que a nova vers\u00e3o do novo modelo seja lida a partir do arquivo <code>table</code> criado. Para isso, na linha em que o experimento \u00e9 referenciado, a primeira palavra deve ser o nome do arquivo <code>table</code>. Veja a seguir:</p> <p>No script <code>run_scantec.sh</code>:</p> <pre><code>pl_model_refer=BAM_TQ0299L064_18levs\n</code></pre> <p>ou, no arquivo namelist <code>scantec.conf</code>:</p> <pre><code>BAM_TQ0299L064_18levs EXP01 /caminho/para/o/arquivo.ctl\n</code></pre> <p>Aten\u00e7\u00e3o</p> <ul> <li>Se esse arquivo \u00e9 tamb\u00e9m utilizado como refer\u00eancia na avalia\u00e7\u00e3o, o novo arquivo <code>table</code> deve tamb\u00e9m ser colocado ap\u00f3s a palavra <code>Reference Model Name:</code>, dentro do arquivo namelist do SCANTEC:</li> </ul> <pre><code>Reference Model Name: BAM_TQ0299L064_18levs\n</code></pre> <p>O novo arquivo <code>table</code> deve conter as seguintes informa\u00e7\u00f5es:</p> <ul> <li>Tipo de arquivo, depois da palavra <code>ftype:</code>;</li> <li>Valor considerado indefinido, depois da palavra <code>undef:</code>;</li> <li>Dimens\u00f5es da grade na longitude, depois da palavra <code>xdim:</code>;</li> <li>Dimens\u00f5es da grade na latitude, depois da palavra <code>ydim:</code>;</li> <li>N\u00famero de n\u00edveis verticais do p\u00f3s-processamento e a sua lista, depois da palavra <code>zdim:</code>;</li> <li>Tabela de vari\u00e1veis, depois da palavra <code>vars:</code>.</li> </ul> <p>Veja o exemplo do arquivo <code>ETA_ams_05km_22levs.model</code>:</p> <pre><code>ftype: grib\nundef: 1e+20\nxdim: 1162 linear -84.099998 0.050000\nydim: 1320 linear -51.000000 0.050000\nzdim:\n22 levels 1020 1000 950 925 900 850 800 750 700 650 600 \n           550  500 450 400 350 300 250 200 150 100 50\nvars:\nvtmp:925 vtmp2(temp:925,umes:925)\nvtmp:850 vtmp2(temp:850,umes:850)\nvtmp:500 vtmp2(temp:500,umes:500)\ntemp:850 temp:850 \ntemp:500 temp:500 \ntemp:250 temp:250 \npsnm:000 pslm:1020 \numes:925 umes:925 \numes:850 umes:850 \numes:500 umes:500 \nagpl:925 agpl:1020 \nzgeo:850 zgeo:850 \nzgeo:500 zgeo:500 \nzgeo:250 zgeo:250 \nuvel:850 uvel:850 \nuvel:500 uvel:500 \nuvel:250 uvel:250 \nvvel:850 vvel:850 \nvvel:500 vvel:500 \nvvel:250 vvel:250 \n::\n</code></pre> <p>Outro arquivo igualmente importante para a configura\u00e7\u00e3o do SCANTEC, \u00e9 o arquivo namelist <code>scantec.vars</code>. Este arquivo cont\u00e9m uma tabela de vari\u00e1veis a serem utilizadas na avalia\u00e7\u00e3o. A tabela de vari\u00e1veis \u00e9 preenchida da seguinte forma (colunas separadas por espa\u00e7o):</p> <ul> <li>A primeira coluna \u00e9 o nome da vari\u00e1vel do SCANTEC;</li> <li>A segunda coluna pode ser o nome da vari\u00e1vel correspondente no modelo da forma como listado no arquivo descritor (<code>.ctl</code>) do modelo.</li> </ul> <p>Veja o exemplo do arquivo <code>scantec.vars</code>:</p> <pre><code>variables:\nVTMP:925 \"Virtual Temperature @ 925 hPa [K]\"\nVTMP:850 \"Virtual Temperature @ 850 hPa [K]\"\nVTMP:500 \"Virtual Temperature @ 500 hPa [K]\"\nTEMP:850 \"Absolute Temperature @ 850 hPa [K]\"\nTEMP:500 \"Absolute Temperature @ 500 hPa [K]\"\nTEMP:250 \"Absolute Temperature @ 250 hPa [K]\"\nPSNM:000 \"Pressure reduced to MSL [hPa]\"\nUMES:925 \"Specific Humidity @ 925 hPa [g/Kg]\"\nUMES:850 \"Specific Humidity @ 850 hPa [g/Kg]\"\nUMES:500 \"Specific Humidity @ 500 hPa [g/Kg]\"\nAGPL:925 \"Inst. Precipitable Water @ 925 hPa [Kg/m2]\"\nZGEO:850 \"Geopotential height @ 850 hPa [gpm]\"\nZGEO:500 \"Geopotential height @ 500 hPa [gpm]\"\nZGEO:250 \"Geopotential height @ 250 hPa [gpm]\"\nUVEL:850 \"Zonal Wind @ 850 hPa [m/s]\"\nUVEL:500 \"Zonal Wind @ 500 hPa [m/s]\"\nUVEL:250 \"Zonal Wind @ 250 hPa [m/s]\"\nVVEL:850 \"Meridional Wind @ 850 hPa [m/s]\"\nVVEL:500 \"Meridional Wind @ 500 hPa [m/s]\"\nVVEL:250 \"Meridional Wind @  250 hPa [m/s]\"\n::\n</code></pre> <p>Nota</p> <p>Observe que ambos os arquivos <code>table</code> e <code>scantec.conf</code>, possuem uma se\u00e7\u00e3o espec\u00edfica para a defini\u00e7\u00e3o das vari\u00e1veis. No arquivo <code>scantec.conf</code>, s\u00e3o definidas as vari\u00e1veis e os nomes das vari\u00e1veis nos n\u00edveis que se deseja avaliar com o SCANTEC. Nos arquivos <code>table</code>, as vari\u00e1veis que se deseja avaliar, devem ser definidas com base nas vari\u00e1veis do modelo. Isso ocorre pois nem sempre as vari\u00e1veis que se dejesa avaliar, n\u00e3o s\u00e3o p\u00f3s-processadas pelos modelos. Para contornar isso, o SCANTEC possibilita o c\u00e1lculo de vari\u00e1veis (com base nas vari\u00e1veis pr\u00f3s-processadas do modelo) durante o seu tempo de execu\u00e7\u00e3o. Veja a se\u00e7\u00e3o Fun\u00e7\u00f5es Matem\u00e1ticas Impl\u00edcitas para mais informa\u00e7\u00f5es.</p>"},{"location":"uso/#funcoes-matematicas-implicitas","title":"Fun\u00e7\u00f5es Matem\u00e1ticas Impl\u00edcitas","text":"<p>A edi\u00e7\u00e3o do arquivo <code>table</code> permite a utiliza\u00e7\u00e3o de fun\u00e7\u00f5es matem\u00e1ticas para a defini\u00e7\u00e3o de novas vari\u00e1veis. Caso o modelo n\u00e3o tenha a vari\u00e1vel que o SCANTEC requer (ou que se deseja avaliar), fun\u00e7\u00f5es matem\u00e1ticas podem ser chamadas na segunda coluna da se\u00e7\u00e3o <code>vars:</code>. Algumas das fun\u00e7\u00f5es disponiveis no SCANTEC podem ser aplicadas para isto, utilizando as vari\u00e1veis p\u00f3s-processadas do modelo. Estas fun\u00e7\u00f5es s\u00e3o escritas entre par\u00eanteses depois do nome da fun\u00e7\u00e3o e s\u00e3o separadas por v\u00edrgulas.</p> <p>Veja o exemplo a seguir onde a vari\u00e1vel <code>vtmp</code> (temperatura virtual) \u00e9 calculada a partir das vari\u00e1veis <code>temp</code> (temperatura absoluta) e <code>umes</code> (umidade espec\u00edfica):</p> <pre><code>vars:\nvtmp:925 vtmp2(temp:925,umes:925)\nvtmp:850 vtmp2(temp:850,umes:850)\nvtmp:500 vtmp2(temp:500,umes:500)\n</code></pre> <p>As seguintes fun\u00e7\u00f5es matem\u00e1ticas est\u00e3o dispon\u00edveis na vers\u00e3o SCANTEC:</p> <ul> <li> <p>Fun\u00e7\u00f5es Trigonom\u00e9tricas:</p> <ul> <li><code>sin(x)</code>: seno de x;</li> <li><code>cos(x)</code>: cosseno de x;</li> <li><code>tan(x)</code>: tangente de x;</li> <li><code>asin(x)</code>: arco seno de x;</li> <li><code>acos(x)</code>: arco cosseno de x;</li> <li><code>atan(x)</code>: arco tangente de x.</li> </ul> </li> <li> <p>Fun\u00e7\u00f5es Aritm\u00e9ticas:</p> <ul> <li><code>sqrt(x)</code>: raiz quadrada de x;</li> <li><code>exp(x)</code>: exponencial de x;</li> <li><code>log(x)</code>: logar\u00edtmo natural de x;</li> <li><code>log10(x)</code>: logar\u00edtmo comum (na base 10) de x.</li> </ul> </li> <li> <p>Fun\u00e7\u00f5es Num\u00e9ricas:</p> <ul> <li><code>abs(x)</code>: retorna o valor absoluto de x;</li> <li><code>min(x,y)</code>: retorna o menor valor entre x e y;</li> <li><code>max(x,y)</code>: retorna o maior valor entre x e y;</li> <li><code>mod(x,y)</code>: rRetorna o resto da divis\u00e3o de x por y.</li> </ul> </li> <li> <p>Fun\u00e7\u00f5es para convers\u00f5es f\u00edsicas:</p> <ul> <li><code>svap(temp)</code>: calcula a press\u00e3o de vapor saturado [Pa] a partir da temperatura do ar (C);</li> <li><code>vapp(es, rh)</code>: calcula a press\u00e3o de vapor [Pa] a partir da press\u00e3o de vapor saturado [Pa] e da umidade relativa [%];</li> <li><code>hmxr1(q)</code>: calcula a raz\u00e3o de mistura [kg/kg] a partir da umidade espec\u00edfica [kg/kg];</li> <li><code>hmxr2(p, ee)</code>: calcula a raz\u00e3o de mistura [kg/kg] a partir da press\u00e3o atmosf\u00e9rica [Pa] e da press\u00e3o de vapor [Pa];</li> <li><code>umes1(w)</code>: calcula a umidade espec\u00edfica [kg/kg] a partir da raz\u00e3o de mistura [kg/kg];</li> <li><code>umes2(p, td)</code>: calcula a raz\u00e3o de mistura [kg/kg] a partir da press\u00e3o atmosf\u00e9rica [Pa] e da temperatura do ponto de orvalho [C];</li> <li><code>umes3(p, t, rh)</code>: calcula a raz\u00e3o de mistura [kg/kg] a partir da press\u00e3o atmosf\u00e9rica [Pa], da temperatura do ar (C) e da umidade relativa do ar [%];</li> <li><code>tpor(t, rh)</code>: calcula a temperatura do ponto de orvalho [C] a partir da temperatura do ar [C] e da umidade relativa do ar [%];</li> <li><code>umrl(p, w, es)</code>: calcula a umidade relativa [%] a partir da raz\u00e3o de mistura [kg/kg], da press\u00e3o de vapor de satura\u00e7\u00e3o [Pa] e da press\u00e3o atmosf\u00e9rica [Pa];</li> <li><code>vtmp1(p, t, rh)</code>: calcula a temperatura virtual [C] a partir da temperatura do ar [C] e da umidade relativa [%] e da press\u00e3o atmosf\u00e9rica [Pa];</li> <li><code>vtmp2(t, q)</code>: calcula a temperatura virtual [C ou K] a partir da temperatura do ar [C ou K] e da Umidade espec\u00edcia [Kg/Kg];</li> </ul> </li> </ul> <p>Dica</p> <p>A implementa\u00e7\u00e3o das fun\u00e7\u00f5es matem\u00e1ticas no SCANTEC, est\u00e1 nas rotinas MathExpress.f90 e scan_MathPlugin.f90.</p> <ol> <li> <p>O modelo AGCM (Atmospheric General Circulation Modelo) representa uma gera\u00e7\u00e3o anterior do modelo BAM (Brazilian Atmospheric Model).\u00a0\u21a9</p> </li> <li> <p>O modelo GFS foi testado a partir da convers\u00e3o dos arquivos GRIB2 para GRIB1, utilizando o script <code>lats4d</code>. A utiliza\u00e7\u00e3o do SCANTEC com os arquivos convertidos desse modelo, devem ser feita com aten\u00e7\u00e3o para os nomes das vari\u00e1veis e os n\u00edveis verticais, uma vez que o modelo utiliza coordenada vertical h\u00edbrida.\u00a0\u21a9</p> </li> </ol>"}]}