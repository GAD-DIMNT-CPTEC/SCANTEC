** Instruções para compilaço e execuço do SCANTEC **

Para compilação e execução siga os seguintes passos:

Última atualização do README: 08/09/2017

*************************************************************************************************************************
Para instalação no supercomputador TUPA:
*************************************************************************************************************************

1. Logar no TUPA;

2. Logar no eslogin02:
$ ssh eslogin02 -XC

3. Escolher um diretorio para a instalação do SCANTEC;

Obs. Pode ser nas areas $HOME/ ou $SUBMIT_HOME/ ou online6/ 

4. Baixar a versao do SCANTEC do repositorio svn (projetos.cptec.inpe.br):
$ svn co https://svn.cptec.inpe.br/scantec/trunk/SCANTEC

Obs.: Alternativamente, pode-se usar o comando abaixo para criar uma instalação com nome diferente:
svn co https://svn.cptec.inpe.br/scantec/trunk/SCANTEC SCANTEC_nome

5. Entrar no diretorio do SCANTEC:
$ cd SCANTEC/

6. Para compilar o SCANTEC execute o script install com o comando:
$ ./install

Obs1. Escolha a općao 1 para make clean caso tenha tipo uma tentativa de
      instalacao sem sucesso já executada.

Obs2. Escolha a opção 3 para usar o ifort no tupa ou a opcao 4 para 
      usar o compilador pgi do TUPA;

7. Executar o SCANTEC (Rodada TestCase):
$ ./run_scantec.sh <opção>

Exemplos de utilização (opções):
- Para fazer um TestCase do BRAMS (Jan/2016) - Seção 1 (a seguir)
$ ./run_scantec.sh 1 
- Para fazer um TestCase do G3DVAR (Ago/2014) - Seção 2 (a seguir);
$ ./run_scantec.sh 2
- Para usar os dados definidos pelo usuario (neste caso é necessário configurar o script para seu interesse na Seção 3). 
svn co https://svn.cptec.inpe.br/scantec/trunk/SCANTEC
$ ./run_scantec.sh 3 

Obs.: Cabe ressaltar que nesta versão estão sendo gerados em separado os resultados das métricas (arquivos *.scam) dos resultados de precipitação. 
Para gerar os resultados das métricas deve-se deixar desligadas as opções "use precipitation" e "use eof", ou seja, os valores destas opções devem ser iguais a zero (0) como nos exemplos abaixos:

Use Precipitation: 0
Use EOFs: 0

E para gerar somente os resultados de precipitação deve-se ligar essas mesmas opções citadas acima, conforme no exemplo:

Use Precipitation: 1
Use EOFs: 1

*************************************************************************************************************************
Versao desenvolvimento (utilize as instruções a seguir para atualização, acréscimo ou deleção dos códigos fonte):
*************************************************************************************************************************

Para o desenvolvimento de novos códigos, implementações de novas métricas ou alterações nos programas fortran (.f90) deve ser feito:

- Logar no eslogin01:
$ ssh eslogin01 -XC

- Exportar a variavel SCAM_ARCH (localizada no script install) com o comando:
$ export SCAM_ARCH=cray_pgi

- Realizada as mudanças ou adições de programas é necessário dar o comando para compilação:
$ make

Obs.: Caso haja mudanças nos arquivos Makefile, Makefile-deps ou Makefile-objs executar os comandos:
$ make clean
$ make

*************************************************************************************************************************
Para instalação em maquina local:
*************************************************************************************************************************

São necessários os seguintes programas:
- Compilador ifort (Intel Fortran);
- Package SVN (subversion);
- Biblioteca LAPACK;

1. Entrar em um diretorio de preferência do usuário para realizar a instalação do SCANTEC:
$ cd DIRETORIO/

2. Baixar a versao do SCANTEC do repositorio svn (projetos.cptec.inpe.br):
$ svn co https://svn.cptec.inpe.br/scantec/trunk/SCANTEC

3. Entrar no diretorio do SCANTEC:
$ cd SCANTEC/

4. Para compilar o SCANTEC execute o script install com o comando:
$ ./install

Obs.: Escolha a opção 3 para o compilador ifort;

5. Entrar no diretorio core/ onde estão os códigos do SCANTEC:
$ cd core/

6. Editar o arquivo de configuração de acordo com os experimentos:
$ gedit scantec.conf &

Obs.:
- Configurar a data inicial e final, tempo de previsão e tempo de analise e total de previsão;
- Configurar o recorte a ser escolhido (Global, América do Sul ou Brasil);
- Configurar o experimento referência e os demais experimentos;
- Configurar o uso de climatologia e precipitacao (normalmente deixar as opções default);
- Configurar o diretório da saída dos dados;

7. Executar o SCANTEC
$ ./scantec.x
